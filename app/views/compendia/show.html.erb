<main class="content" role="main">
  <div class="wrapper">
    <section class="section-block section-block--compendia">
      <header class="section-block__header">
        <h2>
          <%= @compendium.title %>
        </h2>
        
        <%= @compendium.description_html %>
      </header>
      
      <div class="section-block__actions">
        <% if current_user == @compendium.author %>
          <%=
            link_to t('.edit_compendium'), [:edit, @compendium],
              class: 'button is-link is-outlined'
          %>
        <% end %>
        
        <% if current_user == @compendium.author %>
          <%=
            link_to t('.destroy_compendium'), @compendium,
              class: 'button is-danger',
              data:  {
                method:  :delete,
                confirm: t('.confirm_compendium_destruction')
              }
          %>
        <% end %>
      </div>
    </section>
    
    <section class="section-block section-block--maps">
      <header class="section-block__header">
        <h2>
          <%= t '.maps' %>
        </h2>
      </header>
      
      <div class="section-block__actions">
        <% if current_user == @compendium.author %>
          <%=
            link_to t('.new_map'), new_compendium_map_path(@compendium),
              class: 'button is-link is-outlined'
          %>
        <% end %>
      </div>
      
      <% if @maps.present? %>
        <ul>
          <%= render partial: 'map', collection: @maps %>
        </ul>
      <% else %>
        <p><%= t '.no_maps_available' %></p>
      <% end %>
    </section>
    
    <section class="section-block section-block--pages">
      <header class="section-block__header">
        <h2>
          <%= t '.pages' %>
        </h2>
      </header>
      
      <div class="section-block__actions">
        <% if current_user == @compendium.author %>
          <%=
            link_to t('.new_page'), new_compendium_page_path(@compendium),
              class: 'button is-link is-outlined'
          %>
        <% end %>
      </div>
      
      <% if @pages.present? %>
        <ul>
          <%= render partial: 'page', collection: @pages %>
        </ul>
      <% else %>
        <p><%= t '.no_pages_available' %></p>
      <% end %>
    </section>
  </div>
</main>
